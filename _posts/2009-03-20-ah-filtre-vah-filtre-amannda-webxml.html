---
layout: post
title: Ah filtre vah filtre, amanında web.xml
date: '2009-03-20T21:29:00.000+02:00'
author: İbrahim YILDIZ
tags:
- java filtre
- java
modified_time: '2009-03-21T00:05:28.704+02:00'
thumbnail: http://3.bp.blogspot.com/_fGrsh0fTnjE/ScQBj7WBpaI/AAAAAAAAApc/xDeTuSlBdOw/s72-c/chain.gif
blogger_id: tag:blogger.com,1999:blog-2574404706234424211.post-8798896444351524466
blogger_orig_url: http://yildizib.blogspot.com/2009/03/ah-filtre-vah-filtre-amannda-webxml.html
---

Evet filtre javada bir nimet olsa gerek. Hele <span style="font-style: italic;">request</span> ve <span style="font-style: italic;">response</span> nesnelerini değiştirme olanığınıyla tanıştıktan sonra acayip bir sevgidir aldı başını gitti içimde...<br /><br />Neyse yine bir sorunla başlayalım. Sorunlar olmasa hayat çekilmez olurdu herhalde.<br /><br /><span style="font-weight: bold;">Sorun</span>: Daha önce her şeyi ile doğru dürüst çalışan yönetim paneliniz vardır. Daha önce diyorum, çünkü, artık düzgün çalışmıyordur. Eskiden, yönetim paneliniz aracılığıyla girdiğiniz içeriklerde hiçbir sıkıntı olmadığını varsayıyoruz.<br /><br /><span style="font-style: italic;">Örneğin</span>: Türkçe içerik girdiğinizde hiç bir sorun yaşamıyordunuz. Fakat bir başka işlemi gerçeklemesi için "<span style="font-style: italic;">IkinciFiltre</span>" adında bir filtre yazıyorsunuz. Her şey çok iyi görünürken bir de karşınıza daha önce çözdüğünüz ; Türkçe karekter sorununu  ile yine burunburuna kaldınız.<br /><br />Bu canınızı sıkmıştır. Muhtemelen "IkinciFiltre" her şeyi bozuyordur. Doğrudur. Ancak nasıl? Ve neden?<br /><br />Burada basitçe filtreler ile alakalı bir kaç şey bilmek lazım herhalde. Filtrelerin ayaklanması ile alakalı işlem adımları aşağıda sırasıya verilmiş<br /><br /><ol><li><span style="font-style: italic;">Web.xml</span>'de önce filtreler ayaklanır - <span style="font-style: italic;">initialize</span> -</li><li>Ayaklanan filtrelerin önce <span style="font-style: italic;">init</span>() fonksiyonları daha sonra ise bağlantı örüntüsü - url pattern - kimin sorumluluk alanına giriyorsa o filrelerin <span style="font-style: italic;">doFilter</span>() fonksiyonları çalışır.</li><li><span style="font-style: italic;">Web.xml</span>'de girilen sırada, yukarıdan aşağıya çağrılırlar. Eğer bir bağlantı örüntüsü birden fazla filtrenin sorumluluğunda ise web.xml'de hangisi ön sırada tanımlanmışsa onun <span style="font-style: italic;">doFilter</span>() fonksiyonu çağrılır.</li><li>Aynı bağlantı örüntüsü sorumluluk alanına giren birden fazla filtre var ise önce ilk tanımlanın <span style="font-style: italic;">doFilter</span>() fonksiyonu çağrılır. Ardından ikinci filtreye birinci filtrenin <span style="font-style: italic;">doFilter</span>() fonksiyonu içinde çağrılan <span style="font-style: italic;">chain.doFilter</span>() fonksiyonuyla geçilir. Sonra n adet filte sırasıyla bu işlemi yapar. Ve zincirin - <span style="font-style: italic;">chain</span> - en altındaki filtre işlemini tamamlarsa yani <span style="font-style: italic;">doFilter</span>() son satırına kadar çalıştırılırsa bu sefer adımların tersinden, n. filtreden ikinciye oradan da birinci filtreye geri dönülür ve en son ilk çalışan filtrenin <span style="font-style: italic;">doFilter</span>() fonksiyonu tamamlanır.</li><li>Eğer zincirin en sonunda servlet var ise servlet çalışmasını bitirsikten sonra zincirin en son halkasında olan filtreye görev geri teslim edilir. <span style="font-style: italic;">doFilter</span>() fonksiyonuna tamamlayan en son filtre görevi bir üste ve ... En son ilk çalışan filtre çalışmasını bitirir.</li></ol>Bu arada <span style="font-style: italic;">servlet</span> bağlantı adresi ile çağrıldığında önce <span style="font-style: italic;">servletin</span> öntanımlı kurucu fonksiyonu çalıştırılır. Ardından servlet ayaklanır - <span style="font-style: italic;">initialize</span> - . Ve ardından filtreler devreye girer.  Sonrasında filtre zinciri işlemlerine başlar. Yani yukarıdaki maddeler işleme konulur sırasıyla...<br /><br />Yukarıda anlatınları daha iyi anlamanıza yardımcı olabilecek bir adet resim aşağıda verilmiştir.<br /><br /><div style="text-align: center;"><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_fGrsh0fTnjE/ScQBj7WBpaI/AAAAAAAAApc/xDeTuSlBdOw/s1600-h/chain.gif"><img style="cursor: pointer; width: 400px; height: 284px;" src="http://3.bp.blogspot.com/_fGrsh0fTnjE/ScQBj7WBpaI/AAAAAAAAApc/xDeTuSlBdOw/s400/chain.gif" alt="" id="BLOGGER_PHOTO_ID_5315375176941151650" border="0" /></a><br /></div><br /><br />Burada S1, S2, S3 servlettir. F1, F2, F3 filtredir. Okların akış yönü tarayıcının isteğinden - request - sunucuya ve ilgili web bileşenlere doğrudur.<br /><br /><span style="font-weight: bold;">Kaynaklar</span>:<br /><ol><li>http://java.sun.com/products/servlet/Filters.html</li><li>http://www.javaworld.com/javaworld/jw-06-2001/jw-0622-filters.html?page=1</li></ol>